<script lang="ts">
	import '@fontsource/new-rocker'
	import '../styles.scss'
	
	import Flames from '$lib/components/Flames.svelte'
	import { DateTime } from 'luxon'
	const available = DateTime.now().plus({ months: 3 }).monthLong

	let dark = $state(false)
</script>

<div class="app" class:dark>
	<header>
		<button onclick={() => dark = !dark}>
			{#if !dark}
			<svg width="26" height="27" viewBox="0 0 26 27">
			<rect x="0.5" y="1" width="25" height="25" rx="12.5" stroke="black" fill="white"/>
			<path d="M7.13908 18.6422C6.8487 18.3518 6.58424 18.0562 6.34571 17.7555C6.11755 17.4651 5.91532 17.1591 5.73901 16.8376L6.25237 16.3243C7.16501 17.2369 8.15543 17.8333 9.22363 18.1133C10.3022 18.4037 11.3808 18.3829 12.4594 18.051C13.5379 17.7192 14.5387 17.0917 15.4617 16.1687C16.3847 15.2457 17.0122 14.2449 17.344 13.1663C17.6759 12.0878 17.7018 11.0144 17.4218 9.94619C17.1418 8.87798 16.5403 7.88238 15.6173 6.95937L16.1307 6.44601C16.7425 6.78825 17.344 7.25494 17.9352 7.84608C18.7441 8.65501 19.356 9.52616 19.7708 10.4595C20.196 11.4033 20.4138 12.3574 20.4242 13.3219C20.4553 14.2864 20.2738 15.2353 19.8797 16.1687C19.4856 17.1021 18.8841 17.9733 18.0752 18.7822C17.0174 19.84 15.8403 20.5401 14.5439 20.8823C13.2683 21.2245 11.9875 21.209 10.7015 20.8356C9.41549 20.4623 8.22803 19.7311 7.13908 18.6422ZM7.62133 18.1911C8.30581 18.8755 9.07326 19.3837 9.92367 19.7156C10.7741 20.0474 11.6401 20.2082 12.5216 20.1978C13.4135 20.1771 14.2743 19.9904 15.1039 19.6378C15.9543 19.2852 16.7166 18.7718 17.3907 18.0977C18.0752 17.4132 18.5886 16.651 18.9308 15.8109C19.2938 14.9709 19.4805 14.1101 19.4908 13.2286C19.5116 12.3367 19.3508 11.4707 19.0086 10.6307C18.6767 9.78025 18.1685 9.01281 17.4841 8.32833C18.0545 9.20985 18.3708 10.1588 18.433 11.1751C18.5056 12.1811 18.3448 13.1715 17.9507 14.1464C17.567 15.1316 16.9655 16.0339 16.1462 16.8532C15.3373 17.6621 14.435 18.2636 13.4394 18.6577C12.4645 19.0518 11.4741 19.2126 10.4681 19.14C9.46216 19.0674 8.51323 18.7511 7.62133 18.1911Z" fill="black"/>
			</svg>
			{:else}
			<svg width="26" height="27" viewBox="0 0 26 27">
			<!-- <rect x="0.5" y="1" width="25" height="25" rx="12.5" fill="white"/> -->
			<rect x="0.5" y="1" width="25" height="25" rx="12.5" stroke="white" fill="white"/>
			<path d="M11.953 7.86618C11.7919 7.86618 11.6711 7.70493 11.6711 7.56383C11.6711 7.50336 11.6711 7.4832 11.6913 7.46304L12.7383 4.68141C12.7785 4.54031 12.8591 4.5 13 4.5C13.1208 4.5 13.2215 4.54031 13.2617 4.68141L14.2886 7.46304L14.3087 7.56383C14.3087 7.70493 14.1879 7.86618 14.0268 7.86618H11.953ZM8.08725 10.3253C7.94631 10.3253 7.86577 10.2648 7.80537 10.1439L6.57718 7.46304C6.55705 7.42273 6.53691 7.38242 6.53691 7.3421C6.53691 7.14054 6.69799 7.03975 6.83893 7.03975C6.89933 7.03975 6.91946 7.05991 6.95973 7.05991L9.63758 8.30963C9.73826 8.34994 9.81879 8.45073 9.81879 8.57167C9.81879 8.67245 9.79866 8.73292 9.73826 8.77324L8.26846 10.2245C8.22819 10.285 8.16779 10.3253 8.08725 10.3253ZM17.9732 10.3253C17.8524 10.3253 17.7718 10.285 17.6913 10.2245L16.2617 8.77324C16.2013 8.73292 16.1611 8.67245 16.1611 8.57167C16.1611 8.47088 16.2215 8.3701 16.3423 8.30963L19.0403 7.05991C19.0604 7.05991 19.1007 7.03975 19.1409 7.03975C19.302 7.03975 19.443 7.16069 19.443 7.3421C19.443 7.36226 19.443 7.38242 19.4228 7.40258L19.4027 7.46304L18.1745 10.1439C18.1141 10.2447 18.0537 10.3052 17.9732 10.3253ZM13 18.2671C10.3624 18.2671 8.22819 16.1305 8.22819 13.4899C8.22819 10.8494 10.3624 8.73292 13 8.73292C15.5973 8.73292 17.7718 10.8494 17.7718 13.4899C17.7718 16.1506 15.5973 18.2671 13 18.2671ZM13 17.0778C14.953 17.0778 16.5839 15.4854 16.5839 13.4899C16.5839 11.5146 14.953 9.92217 13 9.92217C11.0268 9.92217 9.41611 11.5146 9.41611 13.4899C9.41611 15.4653 11.0268 17.0778 13 17.0778ZM7.0604 14.8203L6.95973 14.8001L4.18121 13.7721C4.0604 13.7318 4 13.6109 4 13.4899C4 13.369 4.0604 13.2682 4.18121 13.2279L7.02013 12.1797H7.0604C7.24161 12.1797 7.34228 12.3208 7.34228 12.4821V14.5179C7.34228 14.6792 7.24161 14.8203 7.0604 14.8203ZM18.9195 14.8203C18.7584 14.8203 18.6376 14.6993 18.6376 14.5179V12.4821C18.6376 12.3208 18.7383 12.1797 18.8993 12.1797C18.9396 12.1797 18.9799 12.1797 19.0201 12.1999L21.7987 13.2279C21.9396 13.2884 22 13.369 22 13.4899C22 13.631 21.9396 13.7116 21.7987 13.7721L19.0201 14.8001L18.9195 14.8203ZM6.83893 19.9602C6.65772 19.9602 6.53691 19.8393 6.53691 19.6579L6.55705 19.5974C6.55705 19.5773 6.55705 19.5571 6.57718 19.537L7.80537 16.8359C7.86577 16.7352 7.94631 16.6747 8.06711 16.6747C8.16779 16.6747 8.22819 16.715 8.26846 16.7553L9.73826 18.2268C9.79866 18.2671 9.81879 18.3477 9.81879 18.4283C9.81879 18.5291 9.73826 18.6501 9.63758 18.6904L6.95973 19.9199C6.91946 19.9401 6.8792 19.9602 6.83893 19.9602ZM19.1409 19.9602C19.1007 19.9602 19.0805 19.9401 19.0403 19.9199L16.3423 18.6904C16.2215 18.6299 16.1611 18.5493 16.1611 18.4283C16.1611 18.3477 16.2013 18.2671 16.2617 18.2268L17.6913 16.7553C17.7517 16.715 17.8322 16.6747 17.9128 16.6747C18.0134 16.6747 18.1141 16.7352 18.1745 16.8359L19.4027 19.537L19.4228 19.5974C19.4228 19.6377 19.4228 19.6377 19.443 19.6579C19.443 19.8191 19.3222 19.9602 19.1409 19.9602ZM13 22.5C12.8792 22.5 12.7785 22.4395 12.7383 22.3186L11.6913 19.537C11.6913 19.5168 11.6913 19.4966 11.6711 19.4362C11.6711 19.2749 11.7718 19.1338 11.953 19.1338H14.0268C14.1678 19.1338 14.3087 19.2749 14.3087 19.4362C14.3087 19.4765 14.3087 19.5168 14.2886 19.537L13.2617 22.3186C13.2215 22.4395 13.1208 22.5 13 22.5Z" fill="black"/>
			</svg>
			{/if}
		</button>
	</header>

	<main>
		<slot />

		{#if dark}<Flames />{/if}
	</main>

	<footer>
		<aside>
			<p>140 CAD/hour<br>
			Available as of <strong>{available}</strong></p>
		</aside>

		<nav>
			<a href="mailto:phil@phils.computer" target="_blank" rel="external">phil@phils.computer</a><br>
			<!-- <a href="https://twitter.com/phillipmalboeuf" rel="external">twitter.com/phillipmalboeuf</a><br> -->
			<a href="https://github.com/phillipmalboeuf" target="_blank" rel="external">github.com/phillipmalboeuf</a>
		</nav>
	</footer>
</div>

<style lang="scss">

	:global(body:has(.dark)) {
		color: white;
		background-color: black;
	}

	main {

		> :global(iframe) {
			position: absolute;
			z-index: 0;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			border: none;
			// transform: rotate(180deg);
			// mix-blend-mode: exclusion;
		}
	}

	footer,
	header {
		position: fixed;
		top: 0;
		right: 0;
		z-index: 2;
		padding: $base * $scale;

		@media (max-width: $mobile) {
			padding: $mobile_base / $mobile_scale;
		}
	}

	header {
		button {
			transition: transform 333ms;
			will-change: transform;

			&:hover,
			&:focus {
				transform: rotate(-15deg);
			}
		}
	}

	footer {
		top: auto;
		bottom: 0;
		right: auto;
		left: 0;
		width: 100vw;

		display: flex;
		justify-content: space-between;
		align-items: flex-end;

		@supports (mix-blend-mode: exclusion) {
			color: $white;
			mix-blend-mode: exclusion;
		}

		aside {
			flex: 2;
		}

		nav {
			text-align: right;
		}
	}
</style>
